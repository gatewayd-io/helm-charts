gatewayd:
  clients:
    default:
      address: "postgres:5432"
  loggers:
    default:
      # For production, use info
      level: debug
replicaCount: 1

image:
  repository: gatewaydio/gatewayd
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Automatically mount a ServiceAccount's API credentials?
  automount: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}
podLabels: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  type: ClusterIP
  port: 15432

ingress:
  enabled: false
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

gatewaydPluginsConfig:
  enabled: true
  content: |
      verificationPolicy: "passdown"
      compatibilityPolicy: "strict"
      acceptancePolicy: "accept"
      terminationPolicy: "stop"
      enableMetricsMerger: True
      metricsMergerPeriod: 5s
      healthCheckPeriod: 5s
      reloadOnCrash: True
      timeout: 55s
      startTimeout: 1m
      plugins:
        - name: gatewayd-plugin-cache
          enabled: True
          url: github.com/gatewayd-io/gatewayd-plugin-cache@latest
          localPath: ../gatewayd-plugin-cache/gatewayd-plugin-cache
          args: ["--log-level", "debug"]
          env:
            - MAGIC_COOKIE_KEY=GATEWAYD_PLUGIN
            - MAGIC_COOKIE_VALUE=5712b87aa5d7e9f9e9ab643e6603181c5b796015cb1c09d6f5ada882bf2a1872
            - REDIS_URL=redis://localhost:6379/0
            - EXPIRY=1h

            - METRICS_ENABLED=True
            - METRICS_UNIX_DOMAIN_SOCKET=/tmp/gatewayd-plugin-cache.sock
            - METRICS_PATH=/metrics
            - PERIODIC_INVALIDATOR_ENABLED=True
            - PERIODIC_INVALIDATOR_INTERVAL=1m
            - PERIODIC_INVALIDATOR_START_DELAY=1m
            - API_ADDRESS=localhost:18080
            - EXIT_ON_STARTUP_ERROR=False
            - SENTRY_DSN=https://70eb1abcd32e41acbdfc17bc3407a543@o4504550475038720.ingest.sentry.io/4505342961123328
          checksum: 054e7dba9c1e3e3910f4928a000d35c8a6199719fad505c66527f3e9b1993833